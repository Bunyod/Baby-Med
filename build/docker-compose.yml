version: '3.9'
services:
  babymed_services-users:
    restart: always
    image: babymed/services-users:latest
    container_name: babymed_services-users
    environment:
      APP_MODE: ${APP_MODE}
      USERS_RPC_PORT: ${USERS_RPC_PORT}
      USERS_HTTP_PORT: ${USERS_HTTP_PORT}
      HTTP_HEADER_LOG: ${HTTP_HEADER_LOG}
      HTTP_BODY_LOG: ${HTTP_BODY_LOG}
      POSTGRES_HOST: babymed-postgres
      POSTGRES_PORT: 5432
      POSTGRES_USER: ${POSTGRES_USER}
      POSTGRES_PASSWORD: ${POSTGRES_PASSWORD}
      POSTGRES_DATABASE: ${POSTGRES_DATABASE}
      POSTGRES_POOL_SIZE: ${POSTGRES_POOL_SIZE}
    networks:
      - external-net
    logging:
      driver: "fluentd"
      options:
        fluentd-address: fluentd:24224
        tag: babymed


networks:
  external-net:
    driver: bridge
    external:
      name: external-net